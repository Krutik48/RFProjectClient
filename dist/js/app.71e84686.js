(function(){"use strict";var e={341:function(e,t,i){var n=i(963),r=i(252);function s(e,t,i,n,s,o){const l=(0,r.up)("HomePage");return(0,r.wg)(),(0,r.j4)(l)}var o=i(577);const l=(0,r._)("h1",null,"Start Driving",-1),a={class:"d-flex flex-row justify-content-center align-items-center m-2"},d=(0,r._)("label",{for:"driver-name"},"Name",-1),c={class:"d-flex flex-row justify-content-center align-items-center m-2"},h=(0,r._)("label",{for:"x"},"X:",-1),u=(0,r._)("label",{for:"y"},"Y:",-1),m={class:"d-flex flex-row justify-content-center align-items-center m-2"},p=(0,r._)("label",{for:"Angle-input"},"Angle",-1),v={class:"d-flex flex-row justify-content-center align-items-center m-2"},g=(0,r._)("label",{for:"speed-input"},"Speed",-1),f=(0,r._)("h2",null,"My Car",-1),y={class:"d-flex flex-row justify-content-around align-items-center flex-wrap",style:{width:"100%"}},b={class:"m-2"},w={key:0,class:"m-2"},k={key:1,class:"m-2"},x={class:"d-flex flex-row justify-content-center align-items-center m-2"},S=(0,r._)("label",{for:"Angle-input"},"Angle",-1),M={class:"d-flex flex-row justify-content-center align-items-center m-2"},_=(0,r._)("label",{for:"speed-input"},"Speed",-1),L=(0,r._)("div",{class:"row"},[(0,r._)("div",{class:"m-3 col d-flex flex-column justify-content-center align-items-center"},[(0,r._)("h4",null,"Other Driver List"),(0,r._)("table",{class:"table table-striped",id:"driver-table"})]),(0,r._)("div",{class:"col m-3 messageBox",id:"messageBox"},[(0,r._)("h4",null,"Messages")])],-1),A=[L];function I(e,t,i,s,L,I){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.wy)((0,r._)("form",{id:"form",onSubmit:t[6]||(t[6]=(0,n.iM)(((...e)=>I.submitForm&&I.submitForm(...e)),["prevent"]))},[l,(0,r._)("div",a,[d,(0,r.wy)((0,r._)("input",{class:"form-control input-box",type:"text",id:"driver-name",name:"name-input","onUpdate:modelValue":t[0]||(t[0]=e=>L.driverName=e),placeholder:"driver name",required:""},null,512),[[n.nr,L.driverName]])]),(0,r._)("div",c,[h,(0,r.wy)((0,r._)("input",{class:"form-control input_cod",type:"number",id:"x",name:"X-coordinate","onUpdate:modelValue":t[1]||(t[1]=e=>L.X=e),required:""},null,512),[[n.nr,L.X]]),u,(0,r.wy)((0,r._)("input",{class:"form-control input_cod",type:"number",id:"y",name:"Y-coordinate","onUpdate:modelValue":t[2]||(t[2]=e=>L.Y=e),required:""},null,512),[[n.nr,L.Y]])]),(0,r._)("div",m,[p,(0,r.wy)((0,r._)("input",{class:"form-control input-box",type:"number",id:"Angle-input",name:"Angle-input","onUpdate:modelValue":t[3]||(t[3]=e=>L.Angle=e),placeholder:"degree",required:""},null,512),[[n.nr,L.Angle]])]),(0,r._)("div",v,[g,(0,r.wy)((0,r._)("input",{class:"form-control input-box",type:"number",id:"speed-input",name:"speed-input","onUpdate:modelValue":t[4]||(t[4]=e=>L.Speed=e),placeholder:"km/h",required:""},null,512),[[n.nr,L.Speed]])]),(0,r._)("button",{class:"btn btn-primary",type:"submit",id:"room-button",onClick:t[5]||(t[5]=(...e)=>I.clickJoin&&I.clickJoin(...e))},"Drive")],544),[[n.F8,L.driverDetailForm]]),(0,r.wy)((0,r._)("div",null,[f,(0,r._)("div",y,[(0,r._)("h5",b,(0,o.zw)(L.driverName),1),L.tableShow?((0,r.wg)(),(0,r.iD)("h5",w,"X: "+(0,o.zw)(L.X.toFixed(2)),1)):(0,r.kq)("",!0),L.tableShow?((0,r.wg)(),(0,r.iD)("h5",k,"Y: "+(0,o.zw)(L.Y.toFixed(2)),1)):(0,r.kq)("",!0),(0,r._)("div",x,[S,(0,r.wy)((0,r._)("input",{class:"form-control input-box",type:"text",id:"Angle-input",name:"Angle-input","onUpdate:modelValue":t[7]||(t[7]=e=>L.Angle=e),placeholder:"degree",required:""},null,512),[[n.nr,L.Angle]])]),(0,r._)("div",M,[_,(0,r.wy)((0,r._)("input",{class:"form-control input-box",type:"text",id:"speed-input",name:"speed-input","onUpdate:modelValue":t[8]||(t[8]=e=>L.Speed=e),placeholder:"km/h",required:""},null,512),[[n.nr,L.Speed]])]),(0,r._)("button",{class:"btn btn-primary m-2",type:"submit",id:"room-button",onClick:t[9]||(t[9]=(...e)=>I.startDriving&&I.startDriving(...e))},"Update")])],512),[[n.F8,L.tableShow]]),(0,r.wy)((0,r._)("hr",null,null,512),[[n.F8,L.tableShow]]),(0,r.wy)((0,r._)("div",null,A,512),[[n.F8,L.tableShow]])],64)}var T=i(367),C=i.p+"media/carStart.2a662fd4.mp3",Y=i.p+"media/receivedMessage.f23c8eec.mp3",j={name:"HomePage",data(){return{driverDetailForm:!0,tableShow:!1,socket:null,driverName:null,X:0,Y:0,Angle:0,Speed:10,driverList:[],overtake:!1,overtakingInterval:null,carUpdatingInterval:null}},methods:{clickJoin(){console.log("Joining room")},submitForm(){const e=new Audio(C);e.play(),console.log("Submitting form",this.driverName,this.X,this.Y,this.Angle,this.Speed),this.socket.emit("send-client-detail",this.driverName,this.X,this.Y,this.Angle,this.Speed),this.startDriving(),this.driverDetailForm=!1,this.tableShow=!0},sendMessage(e){const t=document.getElementById("messageBox"),i=document.createElement("p");i.className="sendMessage",i.style.textAlign="right",i.innerText=e,t.appendChild(i)},receieveMessage(e){const t=new Audio(Y);t.play();const i=document.getElementById("messageBox"),n=document.createElement("p");n.className="receieveMessage",n.style.textAlign="left",n.innerText=e,i.appendChild(n)},startDriving(){this.carUpdatingInterval&&clearInterval(this.carUpdatingInterval),this.overtakingInterval&&clearInterval(this.overtakingInterval),this.carUpdatingInterval=setInterval((()=>{this.X+=this.Speed/3.6*Math.cos(this.Angle*Math.PI/180),this.Y+=this.Speed/3.6*Math.sin(this.Angle*Math.PI/180),this.X=parseFloat(this.X.toFixed(2)),this.Y=parseFloat(this.Y.toFixed(2)),this.socket.emit("send-client-detail-update",this.X,this.Y,this.Angle,this.Speed)}),1e3),this.overtakingInterval=setInterval((()=>{if(!this.overtake)for(let t=0;t<this.driverList.length;t++)if(this.driverList[t].id!=this.socket.id){let i=Math.sqrt(Math.pow(this.X-this.driverList[t].x,2)+Math.pow(this.Y-this.driverList[t].y,2)),n=this.Speed/3.6,r=Math.abs(this.Angle-this.driverList[t].angle);if(i<=n&&r<=10&&n>this.driverList[t].speed/3.6){console.log("overtaking"),this.sendMessage("I'm overtaking "+this.driverList[t].name+" Please slow down");let r=this.driverName+" is overtaking you. Please slow down";this.socket.emit("send-message",1,this.driverList[t].id,r),this.overtake=!0,this.Angle-=5;let s=this.Speed;this.Speed=Math.min(1.3*this.driverList[t].speed,this.Speed),setTimeout((()=>{this.Angle+=5}),2e3);var e=setInterval((()=>{i=Math.sqrt(Math.pow(this.X-this.driverList[t].x,2)+Math.pow(this.Y-this.driverList[t].y,2)),i>2*n&&(this.overtake=!1,this.Speed=s,console.log("overtaking done"),this.sendMessage("I have overtaken "+this.driverList[t].name+". Thank you for your cooperation"),r=this.driverName+" has overtaken you",this.socket.emit("send-message",2,this.driverList[t].id,r),r="Thank you for your cooperation",this.socket.emit("send-message",4,this.driverList[t].id,r),r="You can drive normally now",this.socket.emit("send-message",3,this.driverList[t].id,r),clearInterval(e))}),1e3)}}}),1e3)},displayTable(e,t){const i=document.getElementById("driver-table"),n=i.insertRow(-1),r=n.insertCell(0),s=n.insertCell(1),o=n.insertCell(2),l=n.insertCell(3),a=n.insertCell(4),d=n.insertCell(5);r.innerHTML=t+1,s.innerHTML=e.name,o.innerHTML=e.x,l.innerHTML=e.y,a.innerHTML=e.angle,d.innerHTML=e.speed}},mounted(){this.socket=(0,T.io)("https://rfproject.onrender.com"),this.socket.on("connect",(()=>{console.log("Connected to server ",this.socket.id)})),this.socket.on("all_driver",(e=>{this.driverList=e;const t=document.getElementById("driver-table");t.innerHTML="";const i=t.createTHead(),n=i.insertRow(0),r=n.insertCell(0),s=n.insertCell(1),o=n.insertCell(2),l=n.insertCell(3),a=n.insertCell(4),d=n.insertCell(5);r.innerHTML="ID",s.innerHTML="Name",o.innerHTML="X",l.innerHTML="Y",a.innerHTML="Angle(deg)",d.innerHTML="Speed(km/h)",e.forEach((t=>{t.id!=this.socket.id&&this.displayTable(t,e.indexOf(t))}))})),this.socket.on("receive-message",((e,t,i)=>{if(this.receieveMessage(t),1==e){this.sendMessage("Yes I have slowed down my speed from "+this.Speed+" Km/h to "+this.Speed/4*3+" Km/h"),this.sendMessage("You can overtake now");let e=this.driverName+" has slowed down speed from "+this.Speed+" Km/h to "+this.Speed/4*3+" Km/h";this.Speed=this.Speed/4*3,this.socket.emit("send-message",4,i,e),e="You can overtake now",this.socket.emit("send-message",4,i,e)}3==e&&(this.Speed=this.Speed/3*4,this.sendMessage("I'm again driving at my normal speed of "+this.Speed+" Km/h"))}))}},F=i(744);const H=(0,F.Z)(j,[["render",I]]);var X=H,O={name:"App",components:{HomePage:X}};const D=(0,F.Z)(O,[["render",s]]);var N=D;(0,n.ri)(N).mount("#app")}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,n,r,s){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],s=e[c][2];for(var l=!0,a=0;a<n.length;a++)(!1&s||o>=s)&&Object.keys(i.O).every((function(e){return i.O[e](n[a])}))?n.splice(a--,1):(l=!1,s<o&&(o=s));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,r,s]}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/RFProjectClient/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,o=n[0],l=n[1],a=n[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(r in l)i.o(l,r)&&(i.m[r]=l[r]);if(a)var c=a(i)}for(t&&t(n);d<o.length;d++)s=o[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(341)}));n=i.O(n)})();
//# sourceMappingURL=app.71e84686.js.map